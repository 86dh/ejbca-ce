<?xml version="1.0"?>
<document>
  <properties>
    <title>VA Services</title>
  </properties>
<body>
<section name="VA Services">
<p>
The validation authority (VA) part of EJBCA provides services used to validate a certificate. These services could run on an
installed EJBCA or on a stand alone installation. See <a href="installation-va.html">VA installation</a> for instructions on how to install
it stand alone. Each service is implemented by a servlet that could is enabled/disabled independently from each other at compile time.
</p>
<subsection name="CA certificate store">
<p>
Is used to get a certificate chain to the root CA in order to verify that the certificate is signed by a valid CA (it is valid if the root
is trusted).
<a href="#RFC 4387">RFC 4387</a> is specifying how the certificates are retrieved.
The configuration file ${EJBCA_HOME}/conf/certstore.properties is used to configure the service.
</p><p>
If you view the page http://vahost:8080/certificates/search.cgi you will get links to all URLs that could be used.
'certificates' is the default path for the servlet and could be changed in the configuration.
</p>
</subsection>
<subsection name="CRL store">
<p>
Is used to get a signed list of revoked certificates for a CA.
<a href="#RFC 4387">RFC 4387</a> is specifying how the CRLs are retrieved.
The configuration file ${EJBCA_HOME}/conf/crlstore.properties is used to configure the service.
</p><p>
If you view the page http://vahost:8080/crls/search.cgi you will get links to all URLs that could be used.
'certificates' is the default path for the servlet and could be changed in the configuration.
</p>
</subsection>
<subsection name="OCSP responder">
<p>
Is used to ask if a certificate is revoked or not.
See <a href="architecture-ocsp.html">OCSP Architecture</a>
</p>
</subsection>
</section>

<section name="RFC 4387">
<p>
The protocol to retrieve CRLs and certificates is described in this RFC.
</p><p>
Only CA certificates could be fetched. Since the attributes 'certHash', 'uri', 'iAndSHash', 'name' don't make that much sense to CA
certificates and CRLs they are not implemented.
</p><p>
To be able to specify that a delta CRL should be fetched an extra parameter 'delta' is added to the URL. This is not described in the RFC.
Example:
</p>
<source>
http://myhost:8080/crls/search.cgi?sKIDHash=X4NX3VF9u/tzkkGZU6M6OEffhFc&amp;delta=
</source>
<p>
If you want to implement your own application accessing the VA you could look at the ejbca junit test class org.ejbca.ui.web.protocol.TestCertStoreServlet
</p>
</section>

</body>

</document>

